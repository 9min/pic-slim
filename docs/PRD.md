# PicSlim - 제품 요구사항 문서 (PRD)

## 1. 제품 개요

**PicSlim**은 이미지 파일의 용량을 최적화하는 Windows 데스크톱 애플리케이션입니다. 드래그앤드롭으로 이미지를 추가하고, 한 번의 클릭으로 JPEG/PNG/GIF 이미지를 고품질을 유지하면서 용량을 줄여줍니다.

### 핵심 가치

- **간편함**: 드래그 & 드롭 + 원클릭 압축
- **품질 유지**: 업계 최고 수준의 압축 엔진 사용 (mozjpeg, oxipng, imagequant)
- **빠른 속도**: Rust 기반 네이티브 처리 + 멀티스레드 병렬 압축
- **가벼움**: Tauri 기반 경량 앱 (Electron 대비 작은 바이너리)

## 2. 대상 사용자

| 페르소나 | 설명 | 주요 니즈 |
|----------|------|----------|
| 블로거/콘텐츠 제작자 | 블로그, SNS에 이미지를 자주 업로드하는 사용자 | 빠르고 간편한 일괄 압축 |
| 웹 개발자 | 웹사이트 최적화를 위해 이미지 용량을 줄여야 하는 개발자 | 높은 압축률 + 품질 유지 |
| 일반 사용자 | 디스크 공간 절약이나 이메일 첨부를 위해 이미지 크기를 줄이고 싶은 사용자 | 직관적 UI, 복잡한 설정 없음 |

## 3. 핵심 기능 (현재 구현됨)

### 3.1 이미지 추가
- [x] 드래그 & 드롭으로 이미지 추가
- [x] 파일 선택 다이얼로그로 이미지 추가
- [x] 중복 파일 자동 필터링 (경로 기반)
- [x] 지원 포맷: JPG, JPEG, PNG, GIF

### 3.2 이미지 목록 관리
- [x] 썸네일 미리보기 (128x128)
- [x] 파일명, 원본 크기, 포맷 배지(JPG/PNG/GIF 컬러 구분) 표시
- [x] 압축 상태 표시 (스피너 / 체크마크 / X 아이콘)
- [x] 압축 후 크기 및 압축률(%) 표시
- [x] 개별 이미지 제거 (휴지통 아이콘)
- [x] 전체 초기화 ("새로 시작")
- [x] 요약 헤더: 총 이미지 수, 총 용량, 절약 용량/비율 실시간 표시
- [x] 압축 완료 카드: 전체 완료 시 총 절약량 요약

### 3.3 이미지 압축
- [x] JPEG: mozjpeg 엔진 (progressive, optimize scans)
- [x] PNG: imagequant (lossy) + oxipng (lossless) 2단계 압축
- [x] GIF: 프레임 재인코딩 최적화
- [x] 압축 품질 조절 (60-95, 기본값: 90)
- [x] 멀티스레드 병렬 처리 (rayon)
- [x] 실시간 진행 상태 업데이트 (Tauri Channel)
- [x] 압축 결과가 원본보다 크면 원본 복사 (안전장치)

### 3.4 출력 관리
- [x] 기본 출력 디렉토리: `%USERPROFILE%\Pictures\PicSlim`
- [x] 출력 디렉토리 변경 가능
- [x] 출력 폴더 바로 열기
- [x] 출력 디렉토리 자동 생성

### 3.5 설정
- [x] 압축 품질 슬라이더 (60-95, 기본값: 90)
- [x] 품질 레이블 표시 (최고 품질 / 권장 / 작은 파일)
- [x] 출력 디렉토리 설정
- [x] 압축 엔진 정보 표시 (JPG/PNG/GIF별 엔진명 + 설명)
- [x] 앱 버전 표시
- [x] 설정 자동 저장 (localStorage)

### 3.6 이미지 프리뷰
- [x] 이미지 클릭 시 확대 프리뷰 (800x800)
- [x] 모달 형태로 표시
- [x] Before/After 비교 슬라이더 (압축 완료된 이미지)
  - 마우스 드래그로 원본/압축 비교
  - 키보드 화살표키 지원
  - 원본/압축 라벨 오버레이
- [x] 파일 정보 표시 (파일명, 포맷 배지, 크기, 압축률)

### 3.7 UI/UX
- [x] DM Sans 셀프 호스팅 폰트 (오프라인 대응)
- [x] 프리미엄 디자인 시스템 (커스텀 테마 색상)
- [x] 인터랙션 애니메이션 (fade-in, slide-in, shimmer, spin)
- [x] `prefers-reduced-motion` 접근성 지원
- [x] 드래그 오버 시각적 피드백 (블러 + 보더)

## 4. 미구현 기능 (향후 로드맵)

### Phase 1 - 사용성 개선
- [ ] WebP, AVIF 포맷 지원
- [ ] 이미지 리사이즈 옵션 (최대 너비/높이 설정)
- [ ] 폴더 단위 일괄 추가
- [ ] 다크 모드

### Phase 2 - 고급 기능
- [ ] 포맷별 개별 품질 설정
- [ ] 포맷 변환 (PNG -> JPEG, JPEG -> WebP 등)
- [ ] EXIF 메타데이터 보존/제거 옵션
- [ ] 파일명 규칙 설정 (접두사, 접미사)
- [ ] 원본 덮어쓰기 옵션 (주의 팝업 포함)

### Phase 3 - 확장
- [ ] macOS / Linux 빌드 지원
- [ ] 다국어 지원 (영어, 일본어)
- [ ] 자동 업데이트 (Tauri updater)
- [ ] CLI 모드 (headless 압축)
- [ ] 시스템 트레이 / 우클릭 메뉴 통합

## 5. 비기능 요구사항

| 항목 | 요구사항 |
|------|---------|
| 성능 | 100장 이미지 일괄 압축 시 CPU 코어 수만큼 병렬 처리 |
| 바이너리 크기 | 인스톨러 기준 20MB 이하 목표 |
| 메모리 | 단일 이미지 처리 시 원본 파일 크기의 3배 이하 메모리 사용 |
| 시작 시간 | 앱 시작 1초 이내 |
| 안정성 | 손상된 이미지 파일에 대한 graceful error handling |
| 호환성 | Windows 10/11 (x64) |

## 6. UI 흐름

```
┌─────────────────────────────────────┐
│ Header (로고 + 설정 버튼)            │
├─────────────────────────────────────┤
│                                     │
│  [빈 상태] DropZone                  │
│  - 드래그 또는 클릭하여 이미지 선택     │
│  - JPG/PNG/GIF 포맷 배지             │
│                                     │
│  [이미지 있음] ImageList             │
│  ┌ 요약 헤더: N개 이미지 | 총 크기 | 절약량 ┐
│  │ 썸네일 | 파일명 [JPG] | 크기 → 압축크기 │
│  │ 썸네일 | 파일명 [PNG] | 크기 → 압축크기 │
│  └─────────────────────────────────┘
│  [완료 시] 압축 완료 카드 (총 절약 요약) │
│                                     │
├─────────────────────────────────────┤
│ ActionBar (추가 | 압축 시작 | 폴더 열기) │
└─────────────────────────────────────┘

[오버레이] Settings 슬라이드오버 (품질 + 출력 폴더 + 엔진 정보)
[오버레이] PreviewModal (Before/After 슬라이더 비교)
[오버레이] 드래그 오버 시 블러 + 보더 피드백
```

## 7. 기술 제약사항

- NASM 어셈블러가 빌드 환경에 설치되어 있어야 함 (mozjpeg 의존성)
- Tauri v2 WebView2 런타임 필요 (Windows 10 1803+ 내장)
- 파일 시스템 접근은 모두 Rust 백엔드를 통해 처리 (보안)
